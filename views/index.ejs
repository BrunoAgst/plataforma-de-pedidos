<%- include("./partials/header.ejs") %>
<body>
    <%- include ('./partials/navbar.ejs') %>
    <br>
    <div class="container">
        <hr>
        <nav class="navbar navbar-expand">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <h1 class="nav-link">Lista de Clientes</h1>
                </li>
            </ul>
            <ul class="navbar-nav mr-4">
                <li class="nav-item">
                    <a class="btn btn-warning nav-link" href="/visualizar-usuarios"> Gerenciar Usu√°rios</a>
                </li>
            </ul>
        </nav>
        <hr>
        <a href="/cadastrar-cliente"><button class="btn btn-success ml-4">Cadastrar Cliente</button></a>
        <br>
        <br>
        <% clientes.forEach(cliente => {%>
        <div class="card">
            <div class="card-body">
                <nav class="navbar navbar-expand">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item">
                            <a class="col-pd mr-6"><h3 class="col-md"><%= cliente.name %></h3></a>
                        </li>
                    </ul>
                    <ul class="navbar-nav mr-0 pl-0">
                        <li class="nav-item">
                            <a class="col" href="/editar-cliente/<%= cliente.id %>"><button class="btn btn-warning">Alterar dados</button></a>
                        </li>
                    </ul>
                </nav>
           </div>
            <div class="card-footer">
                <nav class="navbar navbar-expand">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item mr-4">
                            <a href="/cadastrar-produto/<%= cliente.id %>"><button class="btn btn-success col-md">Cadastrar Pedido</button></a>
                        </li>
                        <li class="nav-item">
                            <a href="/detalhes/<%= cliente.slug %>"><button class="btn btn-primary col-md">Visualizar Pedido</button></a>
                        </li>
                    </ul>
                    <ul class="navbar-nav mr-2 pr-1">
                        <form method="POST" action="/excluir-cliente" onsubmit="confirmarDelecao(event, this)">
                            <input type="hidden" name="id" value="<%= cliente.id %>">
                            <button class="btn btn-danger">Excluir Cliente</button>
                        </form>
                    </ul>
                </nav>
            </div>
        </div>
        <% }) %>
        <br>

    </div>
</body>
<%- include("./partials/footer.ejs") %>

<script>
    function confirmarDelecao(event, form){
        event.preventDefault(); 
        var decisisao = confirm("Tem certeza que deseja excluir este cliente?");
        if(decisisao){
            form.submit();
        } 
    }    
</script>
